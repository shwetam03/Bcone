<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<title>ViewAllTimesheet</title>
	<link rel="stylesheet" href="../SiteAssets/Timesheet/css/font-awesome.min.css"  />
	<link rel="stylesheet" href="../SiteAssets/Timesheet/css/stylesheet.css" />
	<link rel="stylesheet" type="text/css" href="../SiteAssets/Timesheet/css/jquery.dataTables.css">
	<link rel="stylesheet" href="../SiteAssets/Timesheet/css/bootstrap.min.css"/>
	<link rel="stylesheet" href="../SiteAssets/Timesheet/css/jquery-ui.css"> 
	<link rel="stylesheet" href="../SiteAssets/Timesheet/css/sumoselect.css">
	<style>
		.table thead tr th {padding: 5px;background: #00b0f0;color: #fff;}	
		tr.otherstyle {background-color: #c4d0d7; color:#fbfbfb;}
		.SumoSelect {width:100% !important;}
		.SumoSelect > .CaptionCont{            border-radius: 0px;            border-color:#ccc !important;        }
		.SumoSelect > .optWrapper > .options  li.opt label{            font-weight: normal;        }
		.SumoSelect .select-all {            padding: 6px 0 4px 35px;            height: auto;        }
		.SumoSelect .select-all label{            font-weight: normal;        }
		.SumoSelect > .CaptionCont > span.placeholder{            font-style: normal;        }
		select[multiple], select[size]{height:30px !important}
		.optWrapper > .options li label { text-align: left !important}
		.CaptionCont > span { text-align: left !important}
		.errMsgs{ color: red; }
		#loading-image{z-index:9999999}
	</style>
</head>
<body>
<div style="text-align: right;" id="login_name_contain" class="login_name_contain"></div>
	<div class="container-fluid">
		<div class="breadcrumb-main">
			<div class="container-fluid">
				<ul>
					<li>
						 <a href="javascript:void(0)" onclick="URLTimesheetHome();">Home</a> 
					</li>
					<li>Timesheet
					</li>
					<li><span id="CurrentTabName"></span>
					</li>
				</ul>
			</div>
		</div>
	</div>
	<div class="container-fluid">
		<div class="mid-block">		
			<div class="mid-top" style="margin-bottom: 5px; ">
				<ul class="top-btns" style="float:left">
					<li style="margin-left:0px;">
					
						<a href="javascript:void(0)" id="clickTest" onclick="openTilldateManagePopup()" >  
							<i class="fa fa-folder-o"></i>
							OPEN - TS PERIOD
						</a>
					</li>
					<li>
						<a href="javascript:void(0)" onclick="openAdminUpdatePopup()" id="clickTest">
							<i class="fa fa-rotate-left"></i>
							RESET - TS STATUS
						</a>
					</li>
					<li id="delegateid">
						<a href="javascript:void(0)" onclick="delegatePopUp()" id="">
							<i class="fa fa-sitemap"></i>
							Delegate Now
						</a>
					</li>
					<span id="SelectedItemCount">0</span> item selected
				</ul><br>
				<div style="margin: 15px 0px 5px 0px;">
					<select id="tableFilter" onchange="onDDChangeEvent()">
							<option value="current">Current Month</option>
							<option value="Previous">Previous Month</option>
							<!-- <option value="Next" >Next Month</option> -->
							<option value="DateRange" >Date Range</option>
					</select>
					<input type="text" id="TxtToData"  class="txtDateInput" hidden placeholder="From Date" style="width:120px" />
                    <input type="text" id="TxtFromDate"  class="txtDateInput" hidden placeholder="To Date" style="width:120px"/>
					<input type="button" style="padding:4px 10px; font-size:10px;" id="BtnFilterData" value="GO" hidden class="btnSubmit" onclick='filterByDateRange()' />
					
					<ul class="top-btns" style="float:right;margin-right:8px;">
					        <li>
                               <a href="javascript:void(0)" id="btnAllPeriods" onclick="filterData('btnAllPeriods')" > 
							   <i class="fa fa-flag-o"></i> All Records
								<span class="highlight_no">0</span>
								</a>
                            </li>
                            <li>
                                <a href="javascript:void(0)" id="btnOpenPeriods" onclick="filterData('btnOpenPeriods')">
								<i class="fa fa-folder-o"></i> Open
                                    	<span class="highlight_no">0</span>
                                </a>
                            </li>
                    
                            <li>
                                <a href="javascript:void(0)" id="btnSubmitPeriods" onclick="filterData('btnSubmitPeriods')">
								<i class="fa fa-send"></i> Submitted
                                    	<span class="highlight_no">0</span>
                                </a>
                            </li>
                            <li>
                                <a href="javascript:void(0)" id="btnAppovedCount" onclick="filterData('btnAppovedCount')">
								<i class="fa fa-check"></i> Approved
                                    	<span class="highlight_no">0</span>
                                </a>
                            </li>
                            <li>
                                <a href="javascript:void(0)" id="btnRejectCount" onclick="filterData('btnRejectCount')">
								<i class="fa fa-ban"></i> Rejected
                                    	<span class="highlight_no">0</span>
                                </a>
                            </li>
                        </ul>
				</div>
				
						
			</div>	
		</div>
	</div>
	<div class="container-fluid">
		<div class="" id="jqxgrid_container">
			<table id="ExpenceDataTable" class="display example table table-bordered table-new" cellspacing="0">
			</table>
		</div>
	</div>

	<div class="black-bg alert-main" id="yesNoPopup" style="display:none;">
		<div class="popup-main">
			<div class="popup-heading" style="margin-bottom: 15px;"><span id="yesNoPopupMsg"></span></div>
			<label id="TillDateOfOpen" hidden><font style="margin-left: -28px;">Till Date :</font></label> <input type="text" id="TxtTillData" hidden  placeholder="Till Date" style="width:120px" readonly/>
			</br><label id="Fillerror" style="text-align: center; font-weight: normal;"><font color="red" style="margin-left:27px;">Select Till Date</font></label>
			<div class="pop-mid">
				<input type="Button" class="divnewbtn" id="btnYes" value="YES"  /> 
				<input type="Button" class="divnewbtn" id="btnNo" onclick="okPopupOnOkButton('#yesNoPopup')"  value="NO" />					
			</div>
		</div>
	</div>


	<div class="black-bg alert-main" style="display:none;" id="OKPopup">
		<div class="popup-main">
			<div class="popup-heading"><span id="okPopupMsg"></span></div>			
			<div class="pop-mid">
				<input type="hidden" id="isPagerefresh"></span>
				<input type="Button" class="divnewbtn" onclick="okPopupOnOkButton('#OKPopup')" value="OK" />    
			</div>			
		</div>
	</div>
<div id="alertmain" class="alert-main" style="display: none">
		<div class="black-bg" id="backcolor">
			<div class="popup-main">
				<div class="popup-heading"><span id="Alert_msg"></span></div>
				<div class="pop-mid">
					<p id="submitValue"></p>
					<input type='Button' class="divnewbtn" id="alert_ok_click" value="OK" onclick="close_div()" />
				</div>
			</div>
		</div>
	</div>
<div id="Confirmation_alert" class="alert-main" style="display: none;">
	<span id="confirmation_type"></span>
	<span id="delete_expense_id" style="display: none;"></span>
	<div class="black-bg" id="Div1">
		<div class="popup-main">
			<div class="popup-heading"><span id="Confirmation_msg">Select resource to delegate</span></div>
			<div class="pop-mid">
			<table>
				<tbody>
					<tr id="">
					<td><select id="PrxAppName" class="search_test" style="width: 300px !important;margin-bottom: 10px;" ></td>
					</tr>
					<tr id="">
					<td><span class="errMsgs"></span></td>
					</tr>
				</tbody>
			</table>
				
				
				<input type="Button" class="divnewbtn" value="OK" id="ok_click" onclick="delegation();">
				<input type="Button" class="divnewbtn" value="Cancel" onclick="confirmation_close();">
			</div>
		</div>
	</div>
</div>
	<!-- Log Pop up -->
<div class="allcommentdiv" >
	<div class="allcommentdiv-heading" style="background: rgb(51,122,183);">
		Log
	</div>
	<div class="allcommentdiv-mid">
		<h3><span id="LogId"></span></h3>
		<div class="vertical-scoll">
			<table class="table table-bordered">
				<thead>
					<tr>
						<th style="width: 150px;background: #00b0f0 !important;">Date</th>
						<th style="width: 100px;background: #00b0f0 !important;">Actor</th> 
						<th style="width: 80px;background: #00b0f0 !important;">Action</th>
						<th style="background: #00b0f0 !important;">Note</th>
					</tr>
				</thead>
				<tbody id="bindlog">
				</tbody>
			</table>
		</div>
	</div>
	<div class="allcommentdiv-foot">
		<a href="javascript:void(0)" class="blue-btn" onclick="closeallcomment()">got it</a>
	</div>
</div>
<!-- Log Pop up -->
<span id="loading-image"></span>
	
<script src="../SiteAssets/Timesheet/js/jquery.min.js"></script>
<script src="../SiteAssets/Timesheet/js/jquery-ui.js"></script>
<script src="../SiteAssets/Timesheet/js/bootstrap.min.js"></script>
<script type="text/javascript" language="javascript" src="../SiteAssets/Timesheet/js/jquery.dataTables.js"></script>
<script src="../SiteAssets/Timesheet/js/Config.js"></script>
<script type="text/javascript" src="../SiteAssets/Timesheet/js/jquery.sumoselect.min.js"></script>
<script type="text/javascript" src="../SiteAssets/BconeExpenseJs/jquery.sumoselect.js"></script>
<script type="text/javascript">
	$.widget.bridge('uitooltip', $.ui.tooltip);
	$.widget.bridge('uibutton', $.ui.button);
</script>

<script>
$(document).ready(function()
{
	disableRightClick();
	setInterval(function()
	{ 
		$("[data-toggle='tooltip']").tooltip(); 
		$('[data-toggle="tooltip"]').tooltip(); 
	}, 100);
});

var ColumnsData;
$(document).ready(function()
{
	GetCurrentUserGUID("1");
	var username = sessionStorage.getItem("CurrentUsername");
	if(username  == "" || username == undefined)
	{
		$("#login_name_contain").text("");
	}
	else
	{
		$("#login_name_contain").text(username);
	}
	
	$('#TxtToData').datepicker
	({ 		
		dateFormat: 'dd-M-yy' ,
		beforeShowDay :function(dd)
		{
			var cc = "gg";
			if(($('#TxtFromDate').val() && dd.valueOf() > (new Date(returnDateFormat($('#TxtFromDate').val()))).valueOf()) || dd.getMonth() >= (new Date().getMonth()+1))
			{
				return [false];
			}
			else
			{
				return [true];
			}
			
		}
	});
	$('#TxtFromDate').datepicker({ 
	dateFormat: 'dd-M-yy',
	beforeShowDay :function(dd)
	{
		var cc = "gg";
		
		if(($('#TxtToData').val() && dd.valueOf() < (new Date(returnDateFormat($('#TxtToData').val()))).valueOf()) || dd.getMonth() >= (new Date().getMonth()+1))
		{
			return [false, "", "Unavailable"];
		}
		else
		{
			return [true];
		}
	}
	});
	
	$('#tableFilter').trigger('change');
	$('#TxtTillData').datepicker({  minDate: 0,dateFormat: 'dd-M-yy' });
	$('#Fillerror').hide();
	$(".errMsgs").text("");
});
function cleardata()
{
	$('#jqxgrid_container').empty();
	$("#jqxgrid_container").append("<table id='ExpenceDataTable' class='display example table table-bordered' cellspacing='0' width='100%'></table>")
} 
function checkall() //select all and un select all
{
	if ($('#select_all').is(':checked'))
	{
		$("input[id^=timid]").prop('checked', true);
	}
	else
	{
		$("input[id^=timid]").prop('checked', false);
	}
	onchildcheck();
}
function unchecksingle(object) 
{
	if ($(object).is(':checked'))
	{
		var CheckBoxCount=$("input[id^=timid]").length;
		var CheckCount=0;
		$("input[id^=timid]").each ( function()
		{
			if($(this).is(':checked'))
			{
				CheckCount=CheckCount+1;
			}
			
		});
		if(CheckBoxCount==CheckCount)
		{
			$("#select_all").prop('checked', true);
		}
	}
	else
	{
		$("#select_all").prop('checked', false);
	}
	onchildcheck();
}

function onDDChangeEvent(ddData)
{
	if(ddData == undefined)
	{
		ddData = "btnAllPeriods";
	}
	$("#TxtToData").hide();
	$("#TxtFromDate").hide();
	$("#BtnFilterData").hide();
	if($("#tableFilter").val() == "DateRange")
	{
		$("#TxtToData").show();
		$("#TxtFromDate").show();
		$("#BtnFilterData").show();
		//GetPeriodMasterData('btnAllPeriods',startDate,endDate);
	}
	else if($("#tableFilter").val() == "Previous")
	{
		var date=new Date(); 
		//date.setDate(0); 
		var lastDay = new Date(date.setDate(0));
		var firstDay = new Date(date.setDate(1)); 
		GetPeriodMasterData(ddData,firstDay.format("yyyy/MM/dd 00:00:00.000"),lastDay.format("yyyy/MM/dd 00:00:00.000"));
	}
	else
	{
		var date = new Date();
		var firstDay = new Date(date.getFullYear(), date.getMonth(), 1);
		var lastDay = new Date(date.getFullYear(), date.getMonth() + 1, 0);
		GetPeriodMasterData(ddData,firstDay.format("yyyy/MM/dd 00:00:00.000"),lastDay.format("yyyy/MM/dd 00:00:00.000"));
	}	
}


function GetPeriodMasterData(getDataID,startDate,endDate)
{	
	$('#loading-image').show();
	monthNames = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"];
	cleardata(); 	
	var GetProjectResourcePeriodsURLs =  "";
	var AjxMethod = "GET";
	
	if(getDataID=="btnAllPeriods")
	{	AjxMethod = "GET";
		$("#btnAllPeriods span").text("0");
				$("#btnOpenPeriods span").text("0");
				$("#btnSubmitPeriods span").text("0");
				$("#btnAppovedCount span").text("0");
				$("#btnRejectCount span").text("0");
		//GetProjectResourcePeriodsURLs =  GetProjectResourcePeriods();
		GetProjectResourcePeriodsURLs =  "https://ppmprod.bcone.com/_api/TimesheetDump?$filter=(APPROVAL_FLAG eq 0  or APPROVAL_FLAG eq 1  or APPROVAL_FLAG eq 2 or APPROVAL_FLAG eq 3) and STARTDATE ge datetime'"+new Date(startDate).format('yyyy-MM-ddT00:00:00')+"' and ENDDATE le datetime'"+new Date(endDate).format('yyyy-MM-ddT00:00:00')+"'";
		/*$.ajax
		({
			url: GetProjectResourcePeriodsURLs,
			method: AjxMethod,
			headers: { "Accept": "application/json; odata=verbose" },
			data: { 
					"Start": startDate,
					"End" : endDate
				},
			success: function (data)
			{	
				if(getDataID != "btnAllPeriods")
				{
					ColumnsData = new Object();
					ColumnsData.Data = data.d.results;
				}
				else
				{	ColumnsData = new Object();
					ColumnsData= data;
				}/*
				
				DisplayColumn(getDataID,ColumnsData);
			},
			error: function (data)
			{
				alert("failed");
				$('#loading-image').hide();
			}
		});*/
		ajaxCallToGetData(getDataID,GetProjectResourcePeriodsURLs,AjxMethod);
	}
	else if(getDataID=="btnOpenPeriods")
	{
		GetProjectResourcePeriodsURLs =  "https://ppmprod.bcone.com/_api/TimesheetDump?$filter=APPROVAL_FLAG eq 0 and STARTDATE ge datetime'"+new Date(startDate).format('yyyy-MM-ddT00:00:00')+"' and ENDDATE le datetime'"+new Date(endDate).format('yyyy-MM-ddT00:00:00')+"'";
		ajaxCallToGetData(getDataID,GetProjectResourcePeriodsURLs,AjxMethod);
	}
	else if(getDataID=="btnSubmitPeriods")
	{
		GetProjectResourcePeriodsURLs =  "https://ppmprod.bcone.com/_api/TimesheetDump?$filter=APPROVAL_FLAG eq 1 and STARTDATE ge datetime'"+new Date(startDate).format('yyyy-MM-ddT00:00:00')+"' and ENDDATE le datetime'"+new Date(endDate).format('yyyy-MM-ddT00:00:00')+"'";
		ajaxCallToGetData(getDataID,GetProjectResourcePeriodsURLs,AjxMethod);
	}
	else if(getDataID=="btnAppovedCount")
	{
		GetProjectResourcePeriodsURLs =  "https://ppmprod.bcone.com/_api/TimesheetDump?$filter=APPROVAL_FLAG eq 2 and STARTDATE ge datetime'"+new Date(startDate).format('yyyy-MM-ddT00:00:00')+"' and ENDDATE le datetime'"+new Date(endDate).format('yyyy-MM-ddT00:00:00')+"'";
		ajaxCallToGetData(getDataID,GetProjectResourcePeriodsURLs,AjxMethod);
	}
	else
	{
		GetProjectResourcePeriodsURLs =  "https://ppmprod.bcone.com/_api/TimesheetDump?$filter=APPROVAL_FLAG eq 3 and STARTDATE ge datetime'"+new Date(startDate).format('yyyy-MM-ddT00:00:00')+"' and ENDDATE le datetime'"+new Date(endDate).format('yyyy-MM-ddT00:00:00')+"'";
		ajaxCallToGetData(getDataID,GetProjectResourcePeriodsURLs,AjxMethod);
	}	
}

function ajaxCallToGetData(getDataID,GetProjectResourcePeriodsURLs,AjxMethod)
{
	if(getDataID == "btnSubmitPeriods" ||getDataID == "btnAppovedCount" ||getDataID == "btnRejectCount")
	{
		$.ajax
		({
			url: "https://ppmprod.bcone.com/_api/TimesheetTramsactionDump",
			method: AjxMethod,
			headers: { "Accept": "application/json; odata=verbose" },	
			async:false,
			success: function (data)
			{	
				approvalSummaryData = data.d;
			},
			error: function (data)
			{
				alert("failed");
				$('#loading-image').hide();
			}
		});
	}
	ColumnsData = new Object();
	ColumnsData.Data = new Array()
	getDatabyApi(getDataID,GetProjectResourcePeriodsURLs,AjxMethod);	
}

function getDatabyApi(getDataID,GetProjectResourcePeriodsURLs,AjxMethod)
{
	$.ajax
	({
		url: GetProjectResourcePeriodsURLs,
		method: AjxMethod,
		headers: { "Accept": "application/json; odata=verbose" },	
		async:false,			
		success: function (data)
		{	
			if(data.d.__next != undefined)
			{
				$.merge(ColumnsData.Data,data.d.results)
				getDatabyApi(getDataID,data.d.__next,AjxMethod)
			}
			else
			{
				$.merge(ColumnsData.Data,data.d.results);
				DisplayColumn(getDataID,ColumnsData);				
			}
			//
			//ColumnsData.Data = data.d.results;				
			//DisplayColumn(getDataID,ColumnsData);
		},
		error: function (data)
		{
			alert("failed");
			$('#loading-image').hide();
		}
	});
}

<!-- function filterData(getDataID) -->
<!-- { -->
	<!-- cleardata();  -->
	//onDDChangeEvent(getDataID);
	
	//var fdate = "";
	//var tdate = "";
	//if($("#TxtToData").val() != "" && $("#TxtFromDate").val() != "")
	//{
		//fdate = new Date($("#TxtToData").val()).format("yyyy/MM/dd 00:00:00.000");
		//tdate = new Date($("#TxtFromDate").val()).format("yyyy/MM/dd 00:00:00.000");
	//} 
	//GetPeriodMasterData(getDataID,fdate,tdate);
	
	<!-- if($("#tableFilter").val() == "DateRange") -->
	<!-- { -->
		<!-- $("#TxtToData").show(); -->
		<!-- $("#TxtFromDate").show(); -->
		<!-- $("#BtnFilterData").show(); -->
		<!-- //GetPeriodMasterData('btnAllPeriods',startDate,endDate); -->
		<!-- GetPeriodMasterData(getDataID,new Date($("#TxtToData").val()).format("yyyy/MM/dd 00:00:00.000"),new Date($("#TxtFromDate").val()).format("yyyy/MM/dd 00:00:00.000")); -->
	<!-- } -->
	<!-- else if($("#tableFilter").val() == "Previous") -->
	<!-- { -->
		<!-- var date=new Date();  -->
		<!-- //date.setDate(0);  -->
		<!-- var lastDay = new Date(date.setDate(0)); -->
		<!-- var firstDay = new Date(date.setDate(1));  -->
		<!-- GetPeriodMasterData(getDataID,firstDay.format("yyyy/MM/dd 00:00:00.000"),lastDay.format("yyyy/MM/dd 00:00:00.000")); -->
	<!-- } -->
	<!-- else -->
	<!-- { -->
		<!-- var date = new Date(); -->
		<!-- var firstDay = new Date(date.getFullYear(), date.getMonth(), 1); -->
		<!-- var lastDay = new Date(date.getFullYear(), date.getMonth() + 1, 0); -->
		<!-- GetPeriodMasterData(getDataID,firstDay.format("yyyy/MM/dd 00:00:00.000"),lastDay.format("yyyy/MM/dd 00:00:00.000")); -->
	<!-- } -->
	<!-- //DisplayColumn(getDataID,ColumnsData); -->
<!-- } -->
function filterData(getDataID)
{
	cleardata(); 
	if($("#tableFilter").val() == "DateRange")
	{
		GetPeriodMasterData(getDataID,new Date($("#TxtToData").val()).format("yyyy/MM/dd 00:00:00.000"),new Date($("#TxtFromDate").val()).format("yyyy/MM/dd 00:00:00.000"));
	}
	else if($("#tableFilter").val() == "Previous")
	{
		var date=new Date();    
		var lastDay = new Date(date.setDate(0));
		var firstDay = new Date(date.setDate(1)); 
		GetPeriodMasterData(getDataID,firstDay.format("yyyy/MM/dd 00:00:00.000"),lastDay.format("yyyy/MM/dd 00:00:00.000"));
	}
	else
	{
		var date = new Date();
		var firstDay = new Date(date.getFullYear(), date.getMonth(), 1);
		var lastDay = new Date(date.getFullYear(), date.getMonth() + 1, 0);
		GetPeriodMasterData(getDataID,firstDay.format("yyyy/MM/dd 00:00:00.000"),lastDay.format("yyyy/MM/dd 00:00:00.000"));
	}
	//DisplayColumn(getDataID,ColumnsData);
}
function DisplayColumn(getDataID,ColumnswiseData)
{
	$("#CurrentTabName").text("");
	data=ColumnswiseData;
	$('#loading-image').show();
	if(getDataID=="btnAllPeriods")
	{
		$('#delegateid').hide();
		$('#SelectedItemCount').text(0);
		$("#btnAllPeriods").parent("li").addClass("green-btn");
		$("#btnOpenPeriods").parent("li").removeClass("green-btn");
		$("#btnSubmitPeriods").parent("li").removeClass("green-btn");
		$("#btnAppovedCount").parent("li").removeClass("green-btn");
		$("#btnRejectCount").parent("li").removeClass("green-btn");
		$("#CurrentTabName").text("All Records");
		
		var	table_header="<thead><tr>";
		table_header=table_header +"<th data-orderable='false' style='width: 50px !important; text-align:center;' id='checkRem'><input type='checkbox' id='select_all'  onclick='checkall();' /></th>";
		table_header=table_header +"<th style='width:50px !important;'>S.No</th>";
		table_header=table_header +"<th style='width:150px !important;'>Resource Name</th> ";
		table_header=table_header +"<th>Timesheet Name</th>";
		table_header=table_header +"<th>Project Name</th>";
		table_header=table_header +"<th>Project Manager</th>";
		table_header=table_header +"<th style='width:130px !important;'>Timesheet Period <br> Status</th>";
		table_header=table_header +"<th style='width:95px !important;'>Timesheet <br> Status</th>";
		table_header=table_header +"<th data-orderable='false' id='remLog' style='width:50px !important;'>Log</th>";
		table_header=table_header +"</tr></thead>";
		//footer menu	
		table_header=table_header +"<tfoot><tr>";
		table_header=table_header +"<th></th>";
		table_header=table_header +"<th></th>";
		table_header=table_header +"<th>Resource Name</th>";
		table_header=table_header +"<th>Timesheet Name</th>";
		table_header=table_header +"<th>Project Name</th>";
		table_header=table_header +"<th>Project Manager</th>";
		table_header=table_header +"<th>Timesheet Period Status</th>";
		table_header=table_header +"<th>Timesheet Status</th>";
		table_header=table_header +"<th></th>";
		table_header=table_header +"</tr></tfoot>";

		table_element="";	
		table_body="<tbody>"; 
		
		if(data.Data.length == 0)
		{
		}
		else
		{
			var openCnt=0;
			var SubmitCnt=0;
			var ApprovedCnt=0;
			var rejectCnt=0;
			var status = "";
				
			for (var i = 0; i < data.Data.length; i++) 
			{			
				var slNo = i+1;
				var commment = data.Data[i].COMMENT;
				var OpenStatus =data.Data[i].OPEN;
				if (OpenStatus == 1)
				{
					OpenStatusText = "TS Period Open";
				}
				else
				{
					OpenStatusText = "TS Period Close";
				}
				var AppFlagStaus = data.Data[i].APPROVAL_FLAG;
				table_body += "<tr>";				
				table_body+="<td style='text-align:center;'><input style='display:inline-block;' class='checkbox' type='checkbox' name='check[]' id='timid"+i+"' value="+data.Data[i].TS_UID+" onclick='unchecksingle(this)' />"; //<input type='hidden' id='commen"+i+"' value="+commment+" />
				table_body += "<input type='hidden' id='projec"+i+"' value="+data.Data[i].PROJ_UID+" /><input type='hidden' id='periodsid"+i+"' value="+data.Data[i].PERIOD_UID+" /><input type='hidden' id='resourcid"+i+"' value="+data.Data[i].RES_UID+" /><input type='hidden' id='openActives"+i+"' value="+OpenStatus+" /></td>";
				table_body+="<td >"+slNo+"</td>";
				var PendingForApproval ="";
				if(AppFlagStaus == 1)
				{
					AppFlagStausTxt = "Submitted";
					PendingForApproval = "";//data.Data[i].Approvers_Comments[0].Approver_Name;
					SubmitCnt++;
					table_body += "<td><a href='ResourceWiseTimesheetDetails.aspx?PeriodUID="+data.Data[i].PERIOD_UID+"&StartDate="+data.Data[i].STARTDATE+"&EndDate="+data.Data[i].ENDDATE+"&TimesheetUID="+data.Data[i].TS_UID+"&RES_UID="+data.Data[i].RES_UID+"' target='_blank' >"+data.Data[i].ResourceName+"</a></td>";
					table_body+="<td>"+data.Data[i].PERIODDISPLAYNAME+" ("+new Date(ColumnsData.Data[i].STARTDATE).format('dd-MMM-yyyy')+" - "+new Date(ColumnsData.Data[i].ENDDATE).format('dd-MMM-yyyy')+")</td>";
				}
				else if (AppFlagStaus == 0)
				{
					AppFlagStausTxt = "Open";
					PendingForApproval ="";
					openCnt++;
					table_body+="<td><a href='TimesheetEntryPageAdmin.aspx?PeriodUID="+data.Data[i].PERIOD_UID+"&StartDate="+data.Data[i].STARTDATE+"&EndDate="+data.Data[i].ENDDATE+"&TimesheetUID="+data.Data[i].TS_UID+"&ProjectUID="+data.Data[i].PROJ_UID+"&ResourceUID="+data.Data[i].RES_UID+"' target='_blank' >"+data.Data[i].ResourceName+"</a></td>";
					table_body+="<td><a href='TimesheetEntryPageAdmin.aspx?PeriodUID="+data.Data[i].PERIOD_UID+"&Start="+data.Data[i].STARTDATE+"&End="+data.Data[i].ENDDATE+"&TimesheetUID=&ProjectUID=&ResourceUID="+data.Data[i].RES_UID+"' target='_blank' >"+data.Data[i].PERIODDISPLAYNAME+" ("+new Date(ColumnsData.Data[i].STARTDATE).format('dd-MMM-yyyy')+" - "+new Date(ColumnsData.Data[i].ENDDATE).format('dd-MMM-yyyy')+")</a></td>";
				}
				else if(AppFlagStaus == 2)
				{
					AppFlagStausTxt = "Approved";
					PendingForApproval ="";
					ApprovedCnt++;
					table_body += "<td><a href='ResourceWiseTimesheetDetails.aspx?PeriodUID="+data.Data[i].PERIOD_UID+"&StartDate="+data.Data[i].STARTDATE+"&EndDate="+data.Data[i].ENDDATE+"&TimesheetUID="+data.Data[i].TS_UID+"&RES_UID="+data.Data[i].RES_UID+"' target='_blank' >"+data.Data[i].ResourceName+"</a></td>";
					table_body+="<td>"+data.Data[i].PERIODDISPLAYNAME+" ("+new Date(ColumnsData.Data[i].STARTDATE).format('dd-MMM-yyyy')+" - "+new Date(ColumnsData.Data[i].ENDDATE).format('dd-MMM-yyyy')+")</td>";
				}
				else if(AppFlagStaus == 3)
				{
					AppFlagStausTxt = "Rejected";
					PendingForApproval ="";
					rejectCnt++;
					table_body += "<td><a href='ResourceWiseTimesheetDetails.aspx?PeriodUID="+data.Data[i].PERIOD_UID+"&StartDate="+data.Data[i].STARTDATE+"&EndDate="+data.Data[i].ENDDATE+"&TimesheetUID="+data.Data[i].TS_UID+"&RES_UID="+data.Data[i].RES_UID+"' target='_blank' >"+data.Data[i].ResourceName+"</a></td>";
					table_body+="<td>"+data.Data[i].PERIODDISPLAYNAME+" ("+new Date(ColumnsData.Data[i].STARTDATE).format('dd-MMM-yyyy')+" - "+new Date(ColumnsData.Data[i].ENDDATE).format('dd-MMM-yyyy')+")</td>";
				}
				table_body+="<td>"+data.Data[i].PROJECT_NAME+"</td>";
				table_body+="<td>"+data.Data[i].PROJECTOWNERNAME+"</td>";
				table_body += "<td>"+ OpenStatusText+"</td>";
				table_body+="<td>"+AppFlagStausTxt+ "</td>";
				table_body += '<td class="clsLog"><input type="hidden" class="ts_name" value=\''+data.Data[i].PROJECT_NAME+'\' ><i onclick="openTSLog(\''+data.Data[i].TS_UID+'\',this)" style="cursor: pointer;color: rgb(6, 94, 160);" class="fa fa-exclamation-circle"></i></td>'; 
				table_body += "</tr>";
				$("#btnAllPeriods span").text(data.Data.length);
				$("#btnOpenPeriods span").text(openCnt);
				$("#btnSubmitPeriods span").text(SubmitCnt);
				$("#btnAppovedCount span").text(ApprovedCnt);
				$("#btnRejectCount span").text(rejectCnt);
			}
		}
		 table_body=table_body+"/<tbody>";
		 table_element=table_header+table_body;
		 $('#ExpenceDataTable').html(table_element);
		bind_dataTable();
		$('#loading-image').hide();
		$("#checkRem").removeClass("sorting");
		$('#remLog').removeClass("sorting");
	}
	if(getDataID=="btnOpenPeriods")
	{
		$("#CurrentTabName").text("Open");
		$('#delegateid').hide();
		$('#SelectedItemCount').text(0);
		$("#btnAllPeriods").parent("li").removeClass("green-btn");
		$("#btnOpenPeriods").parent("li").addClass("green-btn");
		$("#btnSubmitPeriods").parent("li").removeClass("green-btn");
		$("#btnAppovedCount").parent("li").removeClass("green-btn");
		$("#btnRejectCount").parent("li").removeClass("green-btn");
		$('#loading-image').show();
		var	table_header="<thead><tr>";
		table_header=table_header +"<th data-orderable='false' style='width: 50px !important; text-align:center;' id='checkRem'><input type='checkbox' id='select_all'  onclick='checkall();' /></th>";
		table_header=table_header +"<th style='width:50px !important;'>S.No</th>";
		table_header=table_header +"<th style:'width: 10%;'>Resource Name</th> ";
		table_header=table_header +"<th style:'width: 20%;'>Timesheet Name</th>";
		table_header=table_header +"<th style:'width: 15%;'>Project Name</th>";
		table_header=table_header +"<th style:'width: 15%;'>Project Manager</th>";
		table_header=table_header +"<th style:'width: 10%;'>Timesheet Created Date </th>";
		table_header=table_header +"<th style:'width: 10%;'>Timesheet  Status</th>";
		table_header=table_header +"<th data-orderable='false' id='remLog' style='width:50px !important;'>Log</th>";
		table_header=table_header +"</tr></thead>";
		//footer menu	
		table_header=table_header +"<tfoot><tr>";
		table_header=table_header +"<th></th>";
		table_header=table_header +"<th></th>";
		table_header=table_header +"<th>Resource Name</th>";
		table_header=table_header +"<th>Timesheet Name</th>";
		table_header=table_header +"<th>Project Name</th>";
		table_header=table_header +"<th>Project Manager</th>";
		table_header=table_header +"<th>Timesheet Created Date</th>";
		table_header=table_header +"<th>Timesheet Status</th>";
		table_header=table_header +"<th></th>";
		table_header=table_header +"</tr></tfoot>";
		table_element="";	
		table_body="<tbody>"; 	
		if(data.Data.length == 0)
		{
		}
		else
		{
			var status = "";
			//$("#btnAllPeriods span").text(data.Data.length);
			for (var i = 0; i < data.Data.length; i++) 
			{		
				var slNo=i+1;
				var CREATED_Dte = new Date(data.Data[i].CREATED_DATE)
				if(CREATED_Dte=="Invalid Date")
				{
					var Credate ="";
				}
				else
				{
					var Credate = ("0" + CREATED_Dte.getDate()).slice(-2)+  "-" + monthNames[CREATED_Dte.getMonth()] +"-" + CREATED_Dte.getFullYear();
				}
				var commment = data.Data[i].COMMENT;
				var OpenStatus =data.Data[i].OPEN;
				if (OpenStatus == 1)
				{
					OpenStatusText = "TS Period Open";
				}
				else
				{
					OpenStatusText = "TS Period Close";
				}
				var AppFlagStaus = data.Data[i].APPROVAL_FLAG;
				if (AppFlagStaus == 0 || AppFlagStaus == "")
				{
					AppFlagStausTxt = "Open";
					PendingForApproval ="";
					table_body += "<tr>";				
					table_body+="<td style='text-align:center;'><input style='display:inline-block;' class='checkbox' type='checkbox' name='check[]' id='timid"+i+"' value="+data.Data[i].TS_UID+" onclick='unchecksingle(this)' />"; //<input type='hidden' id='commen"+i+"' value="+commment+" />
					table_body += "<input type='hidden' id='projec"+i+"' value="+data.Data[i].PROJ_UID+" /><input type='hidden' id='periodsid"+i+"' value="+data.Data[i].PERIOD_UID+" /><input type='hidden' id='resourcid"+i+"' value="+data.Data[i].RES_UID+" /><input type='hidden' id='openActives"+i+"' value="+OpenStatus+" /></td>";
					table_body += "<td>"+slNo+"</td>";	
					table_body+="<td><a href='TimesheetEntryPageAdmin.aspx?PeriodUID="+data.Data[i].PERIOD_UID+"&StartDate="+data.Data[i].STARTDATE+"&EndDate="+data.Data[i].ENDDATE+"&TimesheetUID="+data.Data[i].TS_UID+"&ProjectUID="+data.Data[i].PROJ_UID+"&ResourceUID="+data.Data[i].RES_UID+"' target='_blank' >"+data.Data[i].ResourceName+"</a></td>";
					table_body+="<td><a href='TimesheetEntryPageAdmin.aspx?PeriodUID="+data.Data[i].PERIOD_UID+"&Start="+data.Data[i].STARTDATE+"&End="+data.Data[i].ENDDATE+"&TimesheetUID=&ProjectUID=&ResourceUID="+data.Data[i].RES_UID+"' target='_blank' >"+data.Data[i].PERIODDISPLAYNAME+" ("+new Date(ColumnsData.Data[i].STARTDATE).format('dd-MMM-yyyy')+" - "+new Date(ColumnsData.Data[i].ENDDATE).format('dd-MMM-yyyy')+")</a></td>";
					table_body+="<td>"+data.Data[i].PROJECT_NAME+"</td>";
					table_body+="<td>"+data.Data[i].PROJECTOWNERNAME+"</td>";
					table_body += "<td>"+Credate+"</td>";
					table_body+="<td>"+AppFlagStausTxt+ "</td>";
					table_body += '<td class="clsLog"><input type="hidden" class="ts_name" value=\''+data.Data[i].PROJECT_NAME+'\' ><i onclick="openTSLog(\''+data.Data[i].TS_UID+'\',this)" style="cursor: pointer;color: rgb(6, 94, 160);" class="fa fa-exclamation-circle"></i></td>'; 
					table_body += "</tr>";	
				}
			}
		}
		 table_body=table_body+"/<tbody>";
		 table_element=table_header+table_body;
		 $('#ExpenceDataTable').html(table_element);
		bind_dataTable();
		$('#loading-image').hide();
		$("#checkRem").removeClass("sorting");
		$('#remLog').removeClass("sorting");
	}
	if(getDataID=="btnSubmitPeriods")
	{	
		$("#CurrentTabName").text("Submitted");
		$('#delegateid').show();
		$('#SelectedItemCount').text(0);
		$("#btnAllPeriods").parent("li").removeClass("green-btn");
		$("#btnOpenPeriods").parent("li").removeClass("green-btn");
		$("#btnSubmitPeriods").parent("li").addClass("green-btn");
		$("#btnAppovedCount").parent("li").removeClass("green-btn");
		$("#btnRejectCount").parent("li").removeClass("green-btn");
		$('#loading-image').show();
		var	table_header="<thead><tr>";
		table_header=table_header +"<th data-orderable='false' style='width: 50px !important; text-align:center;' id='checkRem'><input type='checkbox' id='select_all'  onclick='checkall();' /></th>";
		table_header=table_header +"<th style='width:50px !important;'>S.No</th>";
		table_header=table_header +"<th style='width:150px !important;'>Resource Name</th> ";
		table_header=table_header +"<th>Timesheet Name</th>";
		table_header=table_header +"<th>Project Name</th>";
		table_header=table_header +"<th>Project Manager</th>";
		table_header=table_header +"<th style='width:120px !important;'>Timesheet <br> Status</th>";
		table_header=table_header +"<th>Submitted Date</th>";
		table_header=table_header +"<th style='width:120px !important;'>Pending <br> With</th>";
		table_header=table_header +"<th data-orderable='false' id='remLog' style='width:50px !important;'>Log</th>";
		table_header=table_header +"</tr></thead>";
		//footer menu	
		table_header=table_header +"<tfoot><tr>";
		table_header=table_header +"<th></th>";
		table_header=table_header +"<th></th>";
		table_header=table_header +"<th>Resource Name</th>";
		table_header=table_header +"<th>Timesheet Name</th>";
		table_header=table_header +"<th>Project Name</th>";
		table_header=table_header +"<th>Project Manager</th>";
		table_header=table_header +"<th>Timesheet Status</th>";
		table_header=table_header +"<th>Submitted Date</th>";
		table_header=table_header +"<th>Pending with</th>"; 
		table_header=table_header +"<th></th>";
		table_header=table_header +"</tr></tfoot>";
		table_element="";	
		table_body="<tbody>"; 	
		if(data.Data.length == 0)
		{
			
		}
		else
		{
			var status = "";
			//$("#btnAllPeriods span").text(data.Data.length);
			for (var i = 0; i < data.Data.length; i++) 
			{	
				var slNo = i+1;
				var commment = data.Data[i].COMMENT;
				var OpenStatus =data.Data[i].OPEN;
				if (OpenStatus == 1)
				{
					OpenStatusText = "TS Period Open";
				}
				else
				{
					OpenStatusText = "TS Period Close";
				}
				var AppFlagStaus = data.Data[i].APPROVAL_FLAG;
				if(AppFlagStaus == "1")
				{
					var PendingForApproval="";
					var PendingForApprovalUID="";
					var tempData = new Object;
					tempData.Approvers_Comments = new Array();
					var p=0;
					approvalSummaryData.results.filter(function(e){if(e.TS_UID == data.Data[i].TS_UID){tempData.Approvers_Comments[p] = e;p++;}});
					for(var t=0;t<tempData.Approvers_Comments.length;t++)
					{
						var pebdingLevelSts = tempData.Approvers_Comments[t].STATUS;
						if(pebdingLevelSts=="1")
						{
							var finalPendingWith = tempData.Approvers_Comments[t].ResourceName;
								PendingForApprovalUID = tempData.Approvers_Comments[t].ApproverUID;
						}
					}
					AppFlagStausTxt = "Submitted";
					table_body += "<tr>";				
					table_body+="<td style='text-align:center;'><input style='display:inline-block;' class='checkbox' type='checkbox' name='check[]' id='timid"+i+"' value="+data.Data[i].TS_UID+" onclick='unchecksingle(this)' />"; //<input type='hidden' id='commen"+i+"' value="+commment+" />
					table_body += "<input type='hidden' id='projec"+i+"' value="+data.Data[i].PROJ_UID+" /><input type='hidden' id='periodsid"+i+"' value="+data.Data[i].PERIOD_UID+" /><input type='hidden' id='resourcid"+i+"' value="+data.Data[i].RES_UID+" /><input type='hidden' id='openActives"+i+"' value="+OpenStatus+" /><input type='hidden' id='ApprResUId"+i+"' value="+data.Data[i].CURRENT_APPROVER+"/></td>";
					table_body+="<td>"+slNo+"</td>";
					table_body += "<td><a href='ResourceWiseTimesheetDetails.aspx?PeriodUID="+data.Data[i].PERIOD_UID+"&StartDate="+data.Data[i].STARTDATE+"&EndDate="+data.Data[i].ENDDATE+"&TimesheetUID="+data.Data[i].TS_UID+"&RES_UID="+data.Data[i].RES_UID+"' target='_blank' >"+data.Data[i].ResourceName+"</a></td>";
					table_body+="<td>"+data.Data[i].PERIODDISPLAYNAME+" ("+new Date(ColumnsData.Data[i].STARTDATE).format('dd-MMM-yyyy')+" - "+new Date(ColumnsData.Data[i].ENDDATE).format('dd-MMM-yyyy')+")</td>";
					table_body+="<td>"+data.Data[i].PROJECT_NAME+"</td>";
					table_body+="<td>"+data.Data[i].PROJECTOWNERNAME+"</td>";
					table_body+="<td>"+AppFlagStausTxt+ "</td>";
					var sub_Dtes = new Date(data.Data[i].TS_SUBMITTED_DATE);
					if(sub_Dtes == "Invalid Date")
					{
						var SubmitDateTS = "";
						var subdates = "";
					}
					else
					{
						var SubmitDateTS = ("0" + sub_Dtes.getDate()).slice(-2)+  "-" + monthNames[sub_Dtes.getMonth()] +"-" + sub_Dtes.getFullYear();
						var subdates = dateformat(sub_Dtes);
					}
					table_body+="<td><a style='text-decoration:none; cursor:default;' data-toggle='tooltip' data-placement='top' title='" + subdates + "'>"+SubmitDateTS+ "</a></td>";
					table_body+="<td>"+finalPendingWith+"</td>";
					table_body += '<td class="clsLog"><input type="hidden" class="ts_name" value=\''+data.Data[i].PROJECT_NAME+'\' ><i onclick="openTSLog(\''+data.Data[i].TS_UID+'\',this)" style="cursor: pointer;color: rgb(6, 94, 160);" class="fa fa-exclamation-circle"></i></td>'; 
					table_body += "</tr>";	
				}
			}
		}
		 table_body=table_body+"/<tbody>";
		 table_element=table_header+table_body;
		 $('#ExpenceDataTable').html(table_element);
		bind_dataTable();
		$('#loading-image').hide();
		$("#checkRem").removeClass("sorting");
		$('#remLog').removeClass("sorting");
	}
	if(getDataID=="btnAppovedCount")
	{
		$("#CurrentTabName").text("Approved");
		$('#delegateid').hide();
		$('#SelectedItemCount').text(0);
		$("#btnAllPeriods").parent("li").removeClass("green-btn");
		$("#btnOpenPeriods").parent("li").removeClass("green-btn");
		$("#btnSubmitPeriods").parent("li").removeClass("green-btn");
		$("#btnAppovedCount").parent("li").addClass("green-btn");
		$("#btnRejectCount").parent("li").removeClass("green-btn");
		$('#loading-image').show();
			
		var	table_header="<thead><tr>";
		table_header=table_header +"<th data-orderable='false' style='width: 50px !important; text-align:center;' id='checkRem'><input type='checkbox' id='select_all'  onclick='checkall();' /></th>";
		table_header=table_header +"<th style='width:50px !important;'>S.No</th>";
		table_header=table_header +"<th style='width:150px !important;'>Resource Name</th> ";
		table_header=table_header +"<th>Timesheet Name</th>";
		table_header=table_header +"<th>Project Name</th>";
		table_header=table_header +"<th>Project Manager</th>";
		table_header=table_header +"<th>Submitted Date</th>";
		table_header=table_header +"<th>Approved Date</th>";
		table_header=table_header +"<th>Approved By</th>";
		
		table_header=table_header +"<th>Approver 1</th>";
		table_header=table_header +"<th>Approver 2</th>";
		table_header=table_header +"<th data-orderable='false' id='remLog' style='width:50px !important;'>Log</th>";
		table_header=table_header +"</tr></thead>";
		//footer menu	
		table_header=table_header +"<tfoot><tr>";
		table_header=table_header +"<th></th>";
		table_header=table_header +"<th></th>";
		table_header=table_header +"<th>Resource Name</th>";
		table_header=table_header +"<th>Timesheet Name</th>";
		table_header=table_header +"<th>Project Name</th>";
		table_header=table_header +"<th>Project Manager</th>";
		table_header=table_header +"<th>Submitted Date</th>";
		table_header=table_header +"<th>Approved Date</th>";
		table_header=table_header +"<th>Approved By</th>";
		table_header=table_header +"<th>Approver 1</th>";
		table_header=table_header +"<th>Approver 2</th>";
		table_header=table_header +"<th></th>";
		table_header=table_header +"</tr></tfoot>";

		table_element="";	
		table_body="<tbody>"; 
		
		if(data.Data.length == 0)
		{
			
		}
		else
		{
			var status = "";
			for (var i = 0; i < data.Data.length; i++) 
			{			
				var slNo = i+1;
				var commment = data.Data[i].COMMENT;
				var OpenStatus =data.Data[i].OPEN;
				if (OpenStatus == 1)
				{
					OpenStatusText = "TS Period Open";
				}
				else
				{
					OpenStatusText = "TS Period Close";
				}
				var AppFlagStaus = data.Data[i].APPROVAL_FLAG;
				
				if(AppFlagStaus == 2)
				{
					AppFlagStausTxt = "Approved";
					table_body += "<tr>";				
					table_body+="<td style='text-align:center;'><input style='display:inline-block;' class='checkbox' type='checkbox' name='check[]' id='timid"+i+"' value="+data.Data[i].TS_UID+" onclick='unchecksingle(this)' />"; //<input type='hidden' id='commen"+i+"' value="+commment+" />
					table_body += "<input type='hidden' id='projec"+i+"' value="+data.Data[i].PROJ_UID+" /><input type='hidden' id='periodsid"+i+"' value="+data.Data[i].PERIOD_UID+" /><input type='hidden' id='resourcid"+i+"' value="+data.Data[i].RES_UID+" /><input type='hidden' id='openActives"+i+"' value="+OpenStatus+" /></td>";
					table_body+="<td>"+slNo+"</td>";
					table_body += "<td><a href='ResourceWiseTimesheetDetails.aspx?PeriodUID="+data.Data[i].PERIOD_UID+"&StartDate="+data.Data[i].STARTDATE+"&EndDate="+data.Data[i].ENDDATE+"&TimesheetUID="+data.Data[i].TS_UID+"&RES_UID="+data.Data[i].RES_UID+"' target='_blank' >"+data.Data[i].ResourceName+"</a></td>";
					table_body+="<td>"+data.Data[i].PERIODDISPLAYNAME+" ("+new Date(ColumnsData.Data[i].STARTDATE).format('dd-MMM-yyyy')+" - "+new Date(ColumnsData.Data[i].ENDDATE).format('dd-MMM-yyyy')+")</td>";
					table_body+="<td>"+data.Data[i].PROJECT_NAME+"</td>";
					table_body+="<td>"+data.Data[i].PROJECTOWNERNAME+"</td>";
					var subb_Dte = new Date(data.Data[i].TS_SUBMITTED_DATE);
					if(subb_Dte == "Invalid Date")
					{
						var SubmitDatTS ="";
						var subdatadate = "";
					}
					else
					{
						var SubmitDatTS = ("0" + subb_Dte.getDate()).slice(-2)+  "-" + monthNames[subb_Dte.getMonth()] +"-" + subb_Dte.getFullYear();
						var subdatadate = dateformat(subb_Dte);
					}
					table_body+="<td><a style='text-decoration:none; cursor:default;' data-toggle='tooltip' data-placement='top' title='" + subdatadate + "'>"+SubmitDatTS+ "</a></td>";
					var Appr1 ="";
					var PendingForApprovalUID="";
					var app1Name="";
					var app2Name="";
					var appDate="";	
					var approvedByPerson="";
					var dateApprovd="";
					var dateApprovdate="";
					var tempData = new Object;
					tempData.Approvers_Comments = new Array();
					var p=0;
					approvalSummaryData.results.filter(function(e){if(e.TS_UID == data.Data[i].TS_UID){tempData.Approvers_Comments[p] = e;p++;}})
					for(var t=0;t<tempData.Approvers_Comments.length;t++)
					{
						var apprStatus = tempData.Approvers_Comments[t].STATUS;
						var pebdingLevel = tempData.Approvers_Comments[t].APPROVER_LEVEL;
						var dateAppr = new Date(tempData.Approvers_Comments[t].MOD_DATE);
						if(pebdingLevel=="1")
						{
							app1Name = tempData.Approvers_Comments[t].ResourceName;
						}
						if(pebdingLevel=="1" && apprStatus=="2")
						{
							approvedByPerson = tempData.Approvers_Comments[t].ResourceName;
							if(dateAppr=="Invalid Date")
							{
								dateApprovd="";
								dateApprovdate="";
							}
							else
							{
								dateApprovd = dateformat(dateAppr);
								dateApprovdate = ("0" + dateAppr.getDate()).slice(-2)+  "-" + monthNames[dateAppr.getMonth()] +"-" + dateAppr.getFullYear();
							}
						}
						if(pebdingLevel=="2")
						{
							app2Name = tempData.Approvers_Comments[t].ResourceName;
						}
						if(pebdingLevel=="2" && apprStatus=="2")
						{
							approvedByPerson = tempData.Approvers_Comments[t].ResourceName;
							if(dateAppr=="Invalid Date")
							{
								dateApprovd="";
								dateApprovdate="";
							}
							else
							{
								dateApprovd = dateformat(dateAppr);
								dateApprovdate = ("0" + dateAppr.getDate()).slice(-2)+  "-" + monthNames[dateAppr.getMonth()] +"-" + dateAppr.getFullYear();
							}
						}
					}
					table_body+="<td><a style='text-decoration:none; cursor:default;' data-toggle='tooltip' data-placement='top' title='" + dateApprovd + "'>"+dateApprovdate+"</a></td>";
					table_body+="<td>"+approvedByPerson+"</td>";
					table_body+="<td>"+app1Name+"</td>";
					table_body+="<td>"+app2Name+"</td>";
					table_body += '<td class="clsLog"><input type="hidden" class="ts_name" value=\''+data.Data[i].PROJECT_NAME+'\' ><i onclick="openTSLog(\''+data.Data[i].TS_UID+'\',this)" style="cursor: pointer;color: rgb(6, 94, 160);" class="fa fa-exclamation-circle"></i></td>'; 
					table_body += "</tr>";	
				}
				
					
			}
		}
		 table_body=table_body+"/<tbody>";
		 table_element=table_header+table_body;
		 $('#ExpenceDataTable').html(table_element);
		bind_dataTable();
		$('#loading-image').hide();
		$("#checkRem").removeClass("sorting");
		$('#remLog').removeClass("sorting");
	}
	if(getDataID=="btnRejectCount")
	{
		$("#CurrentTabName").text("Rejected");
		$('#delegateid').hide();
		$('#SelectedItemCount').text(0);
		$("#btnAllPeriods").parent("li").removeClass("green-btn");
		$("#btnOpenPeriods").parent("li").removeClass("green-btn");
		$("#btnSubmitPeriods").parent("li").removeClass("green-btn");
		$("#btnAppovedCount").parent("li").removeClass("green-btn");
		$("#btnRejectCount").parent("li").addClass("green-btn");
		$('#loading-image').show();
		var	table_header="<thead><tr>";
		table_header=table_header +"<th data-orderable='false' style='width: 50px !important; text-align:center;' id='checkRem'><input type='checkbox' id='select_all'  onclick='checkall();' /></th>";
		table_header=table_header +"<th style='width:50px !important;'>S.No</th>";
		table_header=table_header +"<th style='width:150px !important;'>Resource Name</th> ";
		table_header=table_header +"<th>Timesheet <br> Name</th>";
		table_header=table_header +"<th>Project <br> Name</th>";
		table_header=table_header +"<th>Project <br> Manager</th>";
		table_header=table_header +"<th>Submitted Date</th>";
		table_header=table_header +"<th>Rejected Date</th>";
		table_header=table_header +"<th>Rejected By</th>";
		
		table_header=table_header +"<th>Rejection Comment</th>";
		table_header=table_header +"<th data-orderable='false' id='remLog' style='width:50px !important;'>Log</th>";
		table_header=table_header +"</tr></thead>";
		//footer menu	
		table_header=table_header +"<tfoot><tr>";
		table_header=table_header +"<th></th>";
		table_header=table_header +"<th></th>";
		table_header=table_header +"<th>Resource Name</th>";
		table_header=table_header +"<th>Timesheet Name</th>";
		table_header=table_header +"<th>Project Name</th>";
		table_header=table_header +"<th>Project Manager</th>";
		table_header=table_header +"<th>Submitted Date</th>";
		table_header=table_header +"<th>Rejected Date</th>";
		table_header=table_header +"<th>Rejected By</th>";
		table_header=table_header +"<th>Rejection Comment</th>";
		table_header=table_header +"<th></th>";
		table_header=table_header +"</tr></tfoot>";

		table_element="";	
		table_body="<tbody>"; 
		
		if(data.Data.length == 0)
		{
		}
		else
		{
			var status = "";
			for (var i = 0; i < data.Data.length; i++) 
			{			
				var slNo = i+1;
				var commment = data.Data[i].COMMENT;
				var OpenStatus =data.Data[i].OPEN;
				if (OpenStatus == 1)
				{
					OpenStatusText = "TS Period Open";
				}
				else
				{
					OpenStatusText = "TS Period Close";
				}
				var AppFlagStaus = data.Data[i].APPROVAL_FLAG;
				
				var PendingForApproval ="";
				if(AppFlagStaus == 3)
				{
					AppFlagStausTxt = "Rejected";
					table_body += "<tr>";				
					table_body+="<td style='text-align:center;'><input style='display:inline-block;' class='checkbox' type='checkbox' name='check[]' id='timid"+i+"' value="+data.Data[i].TS_UID+" onclick='unchecksingle(this)' />"; //<input type='hidden' id='commen"+i+"' value="+commment+" />
					table_body += "<input type='hidden' id='projec"+i+"' value="+data.Data[i].PROJ_UID+" /><input type='hidden' id='periodsid"+i+"' value="+data.Data[i].PERIOD_UID+" /><input type='hidden' id='resourcid"+i+"' value="+data.Data[i].RES_UID+" /><input type='hidden' id='openActives"+i+"' value="+OpenStatus+" /></td>";
					table_body+="<td>"+slNo+"</td>";
					table_body += "<td><a href='ResourceWiseTimesheetDetails.aspx?PeriodUID="+data.Data[i].PERIOD_UID+"&StartDate="+data.Data[i].STARTDATE+"&EndDate="+data.Data[i].ENDDATE+"&TimesheetUID="+data.Data[i].TS_UID+"&RES_UID="+data.Data[i].RES_UID+"' target='_blank' >"+data.Data[i].ResourceName+"</a></td>";
					table_body+="<td>"+data.Data[i].PERIODDISPLAYNAME+" ("+new Date(ColumnsData.Data[i].STARTDATE).format('dd-MMM-yyyy')+" - "+new Date(ColumnsData.Data[i].ENDDATE).format('dd-MMM-yyyy')+")</td>";
					table_body+="<td>"+data.Data[i].PROJECT_NAME+"</td>";
					table_body+="<td>"+data.Data[i].PROJECTOWNERNAME+"</td>";
					var subb_Dte = new Date(data.Data[i].TS_SUBMITTED_DATE);
					if(subb_Dte == "Invalid Date")
					{
						var SubmitDatTS ="";
						var SUBMitdates = dateformat(sub_Dtes);
					}
					else
					{
						var SubmitDatTS = ("0" + subb_Dte.getDate()).slice(-2)+  "-" + monthNames[subb_Dte.getMonth()] +"-" + subb_Dte.getFullYear();
						var SUBMitdates = dateformat(subb_Dte);
					}
					table_body+="<td><a style='text-decoration:none; cursor:default;' data-toggle='tooltip' data-placement='top' title='" + SUBMitdates + "'>"+SubmitDatTS+ "</a></td>";
					var RejPersonBy ="";
					var RejDate="";
					var Comment_TS="";
					var tempData = new Object;
					tempData.Approvers_Comments = new Array();
					var p=0;
					approvalSummaryData.results.filter(function(e){if(e.TS_UID == data.Data[i].TS_UID){tempData.Approvers_Comments[p] = e;p++;}})
					
					for(var t=0;t<tempData.Approvers_Comments.length;t++)
					{
						var apprStatus = tempData.Approvers_Comments[t].STATUS;
						var pebdingLevel = tempData.Approvers_Comments[t].APPROVER_LEVEL;
						var dateAppr = new Date(tempData.Approvers_Comments[t].MOD_DATE);
						if(pebdingLevel=="1" && apprStatus=="3")
						{
							RejPersonBy = tempData.Approvers_Comments[t].ResourceName;
							if(dateAppr=="Invalid Date")
							{
								daterejecteds="";
								dateRejdate="";
							}
							else
							{
								daterejecteds = dateformat(dateAppr);
								dateRejdate = ("0" + dateAppr.getDate()).slice(-2)+  "-" + monthNames[dateAppr.getMonth()] +"-" + dateAppr.getFullYear();
							}
							Comment_TS = tempData.Approvers_Comments[t].COMMENT;
						}
						if(pebdingLevel=="2" && apprStatus=="3")
						{
							RejPersonBy = tempData.Approvers_Comments[t].ResourceName;
							if(dateAppr=="Invalid Date")
							{
								daterejecteds="";
								dateRejdate="";
							}
							else
							{
								daterejecteds = dateformat(dateAppr);
								dateRejdate = ("0" + dateAppr.getDate()).slice(-2)+  "-" + monthNames[dateAppr.getMonth()] +"-" + dateAppr.getFullYear();
							}
							Comment_TS = tempData.Approvers_Comments[t].COMMENT;
						}
					}
					table_body+="<td ><a style='text-decoration:none; cursor:default;' data-toggle='tooltip' data-placement='top' title='" + daterejecteds + "'>"+dateRejdate+"</a></td>";
					table_body+="<td>"+RejPersonBy+"</td>";
					var Comment_TSLimitLength = Comment_TS;
					var lessCommentData = Comment_TSLimitLength.length > 12 ? Comment_TSLimitLength.slice(0,15) + "..." :  Comment_TSLimitLength;
					table_body+="<td><span  title='"+Comment_TS+"'  data-toggle='tooltip' data-placement='top'> "+lessCommentData+"</span></td>";
					table_body += '<td class="clsLog"><input type="hidden" class="ts_name" value=\''+data.Data[i].PROJECT_NAME+'\' ><i onclick="openTSLog(\''+data.Data[i].TS_UID+'\',this)" style="cursor: pointer;color: rgb(6, 94, 160);" class="fa fa-exclamation-circle"></i></td>'; 
					table_body += "</tr>";	
				}
				
					
			}
		}
		 table_body=table_body+"</tbody>";
		 table_element=table_header+table_body;
		 $('#ExpenceDataTable').html(table_element);
		bind_dataTable();
		$('#loading-image').hide();
		$("#checkRem").removeClass("sorting");
		$('#remLog').removeClass("sorting");
	}
}

<!-- function dateformat(myDate) -->
<!-- { -->
	<!-- monthNames = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"]; -->
	<!-- var hr = myDate.getHours(); -->
	<!-- hr = hr % 12; -->
	<!-- hr = hr ? hr : 12; -->
	<!-- var min = myDate.getMinutes(); -->
	<!-- if (min < 10) -->
	<!-- { -->
		<!-- min = "0" + min; -->
	<!-- } -->
	<!-- var ampm = hr < 12 ? "am" : "pm"; -->
	<!-- return ("0" + myDate.getDate()).slice(-2)+  "-" + monthNames[myDate.getMonth()] +"-" + myDate.getFullYear() +" "+ hr + ":" + min + ":" + myDate.getSeconds() +" "+ampm ; -->
<!-- } -->

function dateformat(date) 
{
	var monthNames = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"];
	var hours = date.getHours();
	var minutes = date.getMinutes();
	var ampm = hours >= 12 ? 'pm' : 'am';
	hours = hours % 12;
	hours = hours ? hours : 12; // the hour '0' should be '12'
	minutes = minutes < 10 ? '0'+minutes : minutes;
	return ("0" + date.getDate()).slice(-2)+  "-" + monthNames[date.getMonth()] +"-" + date.getFullYear() +" "+ hours + ":" + minutes + ":" + date.getSeconds() +" "+ampm ;
}

function openAdminUpdatePopup()
{
	var no_checked=0;
	var childCheckboxes = $('#ExpenceDataTable tbody tr td').find('input[type=checkbox]');
	var no_checked1 = childCheckboxes.filter(':checked').length;
	var source = $("#ExpenceDataTable").DataTable();           
    $("input[type=checkbox]", source.rows().nodes()).each(function ()
	{
		var tuisre = $(this).is(":checked");
		if (tuisre)
		{
			no_checked++;
		}
	});
	if(no_checked==0)
	{
		openOKpopup(popUpMessage.AdminAtleastOnePopup,"");		
	}
	else
	{
		$('#TxtTillData').hide();
		$('#TillDateOfOpen').hide();
		openyesNoPopup('AdminUpdateTSstatusReset',popUpMessage.adminResetUpdate);
		
	}
}
function openTilldateManagePopup()
{
	$('#TillDateOfOpen').show();
	$('#TxtTillData').show();
	$('#TxtTillData').val("");
	var no_checked=0;
	var childCheckboxes = $('#ExpenceDataTable tbody tr td').find('input[type=checkbox]');
	var  no_checked1 = childCheckboxes.filter(':checked').length;
	var source = $("#ExpenceDataTable").DataTable();           
	$("input[type=checkbox]", source.rows().nodes()).each(function ()
	{
		var tuisre = $(this).is(":checked");
		if (tuisre)
		{
			no_checked++;
		}
	});
	if(no_checked==0)
	{
		openOKpopup(popUpMessage.AdminAtleastOnePopup,"");		
	}
	else
	{
		openyesNoPopup('AdminOpenTimesheetPeriods',popUpMessage.SureTilldate);
	}
}
function TimesheetAdminUpdateTSstatus()
{	
	var approvedData = new Object();
	approvedData.Data = new Array();	
	var childCheckboxes = $('#ExpenceDataTable tbody tr td').find('input[type=checkbox]');
	var  no_checked1 = childCheckboxes.filter(':checked').length;
	var source = $("#ExpenceDataTable").DataTable();           
	$("input[type=checkbox]", source.rows().nodes()).each(function ()
	{
		var tuisre = $(this).is(":checked");
		if (tuisre)
		{
			var tempData = new Object();
			tempData.TimesheetUID = $(this).closest("tr").find("input[id^=timid]").val();
			tempData.PeriodUID = $(this).closest("tr").find("input[id^=periodsid]").val();
			tempData.ProjectUID = $(this).closest("tr").find("input[id^=projec]").val();
			tempData.ResourceUID = $(this).closest("tr").find("input[id^=resourcid]").val();
			tempData.Comment = $(this).closest("tr").find("input[id^=commen]").val();
			approvedData.Data.push(tempData);
		}
	});
	var ApproveRejectJson = JSON.stringify(approvedData);
	var Admin_UpdateTSstatusUrls = Admin_UpdateTSstatus();
	$.ajax
	({       
		url: Admin_UpdateTSstatusUrls,
		headers: { "Accept": "application/json; odata=verbose" },
		method: "POST",
		data: approvedData,
		dataType: 'json',
		success: function(data)
		{
			okPopupOnOkButton('#yesNoPopup');
			openOKpopup(popUpMessage.AdminResetSucessfully,"true");
			
		}
	});
}
function TimesheetAdminTilldateData()
{	
	var approvedDataTillDate = new Object();
	approvedDataTillDate.Data = new Array();

	var textboxTillDate =  $('#TxtTillData').val();
	if(textboxTillDate == "")
	{
		$('#Fillerror').show();
	}
	else
	{
		var no_checked=0;
		var childCheckboxes = $('#ExpenceDataTable tbody tr td').find('input[type=checkbox]');
		var  no_checked1 = childCheckboxes.filter(':checked').length;
		var source = $("#ExpenceDataTable").DataTable();           
		$("input[type=checkbox]", source.rows().nodes()).each(function ()
		{
			var tuisre = $(this).is(":checked");
			if (tuisre)
			{
				var tempDataOpen = new Object();
				tempDataOpen.TillDate = textboxTillDate;
				tempDataOpen.TimesheetUID = $(this).closest("tr").find("input[id^=timid]").val();
				tempDataOpen.PeriodUID = $(this).closest("tr").find("input[id^=periodsid]").val();
				tempDataOpen.ProjectUID = $(this).closest("tr").find("input[id^=projec]").val();
				tempDataOpen.ResourceUID = $(this).closest("tr").find("input[id^=resourcid]").val();
				tempDataOpen.Active = $(this).closest("tr").find("input[id^=openActives]").val();
				approvedDataTillDate.Data.push(tempDataOpen);	
			}
		});
		var ApproveRejectJson = JSON.stringify(approvedDataTillDate);
		var OpenTimesheetPeriodUrls = OpenTimesheetPeriod();
		$.ajax
		({       
			url: OpenTimesheetPeriodUrls,
			headers: { "Accept": "application/json; odata=verbose" },
			method: "POST",
			data: approvedDataTillDate,
			dataType: 'json',
			success: function(data)
			{
				okPopupOnOkButton('#yesNoPopup');
				openOKpopup(popUpMessage.AdminOpenSucessfully,"true");
			}
		});
	}
}
var count = 0;
var table ="";
function bind_dataTable() //table srearch and column search
{
	$('#ExpenceDataTable').DataTable
	( {
		"oLanguage": {
			"sEmptyTable":     "No Records found."
		},
		"order": []
	} );
	
	var ExpenceDataTableElement = $('#ExpenceDataTable').DataTable();
	$('#ExpenceDataTable tfoot th').each( function ()
	{
		var title = $(this).text();
		if(title == "")
		{
			$(this).html();
		}
		else
		{
			$(this).html( '<input type="text" placeholder="Search"/>' );
		}
	} );

	ExpenceDataTableElement.columns().every( function ()
	{
		var that = this;
		$( 'input', this.footer() ).on( 'keyup change', function ()
		{
			$("#checkRem").removeClass("sorting");
			if ( that.search() !== this.value ) 
			{
				that
				.search( this.value )
				.draw();
			}
		} );
	} );
	if($('.dataTables_empty').text()=='No data available in table')
	$('#ExpenceDataTable tfoot,.dataTables_length,.dataTables_filter,.dataTables_info,.dataTables_paginate').remove();
}

function onchildcheck()
{
	var childCheckboxes = $('#ExpenceDataTable tbody tr td').find('input[type=checkbox]');
	var  no_checked1 = childCheckboxes.filter(':checked').length;
	var no_checked=0;
	var source = $("#ExpenceDataTable").DataTable();           
	$("input[type=checkbox]", source.rows().nodes()).each(function ()
	{
		var tuisre = $(this).is(":checked");
		if (tuisre)
		{
			no_checked++;
		}
	});
	if(no_checked>0)
	{
		$('#SelectedItemCount').text(no_checked);
	}
	else
	{
		$('#SelectedItemCount').text(no_checked);
	}
	if(childCheckboxes.length == no_checked1)
	{ 
		$("#select_all").prop('checked',true);
	}
	else
	{
		$("#select_all").prop('checked',false);
	}
}

function returnDateFormat(input)
{
	var sptdate = String(input).split("-");
	var months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
	var myMonth = sptdate[1];
    var myDay = sptdate[0];
    var myYear = sptdate[2];
	return (months.indexOf(myMonth)+1).toString() + "-"+  myDay +"-"+myYear;
}

function filterByDateRange()
{
	if($("#TxtToData").val() == "" || $(TxtFromDate).val() == "")
	{
		openOKpopup("Please select valid Date",false);
		return;
	}
	else
	{
		GetPeriodMasterData('btnAllPeriods',new Date($("#TxtToData").val()).format("yyyy/MM/dd 00:00:00.000"),new Date($("#TxtFromDate").val()).format("yyyy/MM/dd 00:00:00.000"));
	}	
}


function delegatePopUp()
{
	var no_checkedDelegate=0;
	var childCheckboxes = $('#ExpenceDataTable tbody tr td').find('input[type=checkbox]');
	var  no_checked1 = childCheckboxes.filter(':checked').length;
	var source = $("#ExpenceDataTable").DataTable();           

	$("input[type=checkbox]", source.rows().nodes()).each(function ()
	{
		var tuisre = $(this).is(":checked");
		if (tuisre)
		{
			no_checkedDelegate++;
		}
	});
	if(no_checkedDelegate==0)
	{
		openOKpopup(popUpMessage.AdminAtleastOnePopup,"");		
	}
	else
	{
		$('#Confirmation_alert').show();
		getAllProxy();
	}
}
function getAllProxy()
{
	$('#loading-image').show();
	indexData =[];
	var Admin_GetPeriodsandUsersDataUrls = Admin_GetPeriodsandUsersDataURLRH();
	$.ajax
	({
		url:Admin_GetPeriodsandUsersDataUrls,
		method:"POST",
		headers: { "Accept": "application/json; odata=verbose" },
		success:function(Resdata)
		{	
			if($("#PrxAppName").hasClass("SumoUnder")){$("#PrxAppName").html('');$("#PrxAppName")[0].sumo.unload();}
			$("#PrxAppName").append("<option value='Select_Employee' index=0>Select Resource</option>");
			for(var i=0;i<Resdata.Users.length;i++)
			{ 
				var res_name = Resdata.Users[i].ResourceName;
				$("#PrxAppName").append("<option value=\""+Resdata.Users[i].ResourceId+"##"+Resdata.Users[i].ResourceEmailAddress+"##"+res_name+"##"+(i+1)+"\" index=\""+(i+1)+"\">"+Resdata.Users[i].ResourceName+"</option>");
			}
			$('.search_test').SumoSelect({search: true, searchText: 'Search Approver'});
			$('#loading-image').hide();
			
		},
		error:function()
		{
			openOKpopup(popUpMessage.ServerError,false);
			$('#loading-image').hide();
		}	
	});
	
}
function delegation()
{
	var no_checked=0;
	var childCheckboxes = $('#ExpenceDataTable tbody tr td').find('input[type=checkbox]');
	var  no_checked1 = childCheckboxes.filter(':checked').length;
	var source = $("#ExpenceDataTable").DataTable();           
	var delegationDta = new Object();
	delegationDta.Data = new Array();
	var Delegated_App = $('#PrxAppName option:selected').val();
	if(Delegated_App=="Select_Employee" || Delegated_App== undefined)
	{
		$(".errMsgs").text("");
		$(".errMsgs").text("select delegation name");
	}
	else
	{
		$("input[type=checkbox]", source.rows().nodes()).each(function ()
		{
			$(".errMsgs").text("");
			var tuisre = $(this).is(":checked");
			if (tuisre)
			{
				var tempDataDelegation = new Object();
				tempDataDelegation.TimesheetUID = $(this).closest("tr").find("input[id^=timid]").val();
				tempDataDelegation.ApproverUID = $(this).closest("tr").find("input[id^=ApprResUId]").val();
				tempDataDelegation.Delegated_ApproverUID = Delegated_App.split('##')[0];
				delegationDta.Data.push(tempDataDelegation);	
			}
		});
		$.ajax
		({
			url:"https://ppmprod.bcone.com/api/timesheet/Admin_SaveTimesheetPostDelegation",
			method:"POST",
			headers: { "Accept": "application/json; odata=verbose" },
			dataType: 'json',
			data:delegationDta,
			success:function(data)
			{
				confirmation_close();
				okPopupOnOkButton('#yesNoPopup');
				openOKpopup("Delegation Done Successfully","true");
			},
			error:function(data)
			{
				alert("Delegation failed");
			}	
		});
	}
}
function confirmation_close()
{
	$('#Confirmation_alert').hide();
}
function close_div()
{
	$("#alertmain").hide();
	document.getElementById("Alert_msg").innerHTML="";
}

function openTSLog(timeUid,currData)
{
	$('.addition-info-block').animate({ width: 'toggle'});
	monthNames = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"];
	$('#loading-image').show();
	var ServiceURL = getURLTimesheet_AuditLog();
	var inputData = new Object();
	inputData.TimesheetUID = timeUid;
	callService(ServiceURL,inputData,openLogTable,"",currData);
}
function openLogTable(data,passData)
{
	var innerLogHTML = "";
	$("#bindlog").text("");
	$("#LogId").text($(passData.parentNode).find(".ts_name").val());
	for(var i=0;i<data.Data.length;i++)
	{	
		innerLogHTML += '<tr>';
		var lofdate = new Date(data.Data[i].Created_Date);
		innerLogHTML += "<td><a style='text-decoration:none; cursor:default;' data-toggle='tooltip' data-placement='top' title='" +dateformat(lofdate)+ "'>"+(new Date(data.Data[i].Created_Date)).format('dd-MMM-yyyy')+"</a></td>";
		innerLogHTML += '<td>'+data.Data[i].Actor+'</td>';
		if(data.Data[i].Remarks.indexOf("Rejected") > -1)
		{
			innerLogHTML += '<td>REJECTED</td>';
		}
		else if(data.Data[i].Remarks.indexOf("Approved") > -1)
		{
			innerLogHTML += '<td>APPROVED</td>';		
		}
		else if(data.Data[i].Remarks.indexOf("SUBMIT") > -1)
		{
			innerLogHTML += '<td>SUBMITTED</td>';		
		}
		else if(data.Data[i].Remarks.indexOf("SAVE") > -1)
		{
			innerLogHTML += '<td>SAVED</td>';		
		}
		else
		{
			innerLogHTML += '<td>'+data.Data[i].Type+'</td>';
		}
		innerLogHTML += '<td>'+data.Data[i].Remarks+'</td>';
		innerLogHTML += '</tr>';
	
	}
	$("#bindlog").append(innerLogHTML);
	$('.allcommentdiv').show({ width: 'toggle' });
	$('#loading-image').hide();
}
function closeallcomment() 
{
	$('.allcommentdiv').animate({ width: 'toggle' });
}


</script>

</body>
</html>
